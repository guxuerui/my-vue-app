<template>
  <div class="pt-5 home-container">
    <div class="bg-blue-100">
      <div class="min-h-screen bg-blue-50 p-8">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
          <div class="grid grid-cols-12 gap-6">
          <!-- Sidebar -->
          <div class="col-span-3 px-6 py-8">
            <div class="flex items-center space-x-4 mb-10">
            <img alt="Company logo" class="rounded-full" height="50" src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-pHFGMiraZCJOYx1x9LILtaII/user-nCj2M1A2CgrbRmk5klxQUFNx/img-sx5GDjvni5SFdPmHwMiPjpOc.png?st=2023-11-21T01%3A36%3A46Z&amp;se=2023-11-21T03%3A36%3A46Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-11-20T20%3A02%3A35Z&amp;ske=2023-11-21T20%3A02%3A35Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=4C95Gfi2Q%2BuniLxRYoF8ZlDQ1SpuOlG53jGpeYy4ocA%3D" width="50"/>
            <h2 class="text-xl font-semibold">
              Hello Melinda
            </h2>
            </div>
            <div class="mb-6">
            <div class="flex items-center justify-between mb-4">
              <span class="text-sm font-semibold">
              Alpaca.studio
              </span>
              <i class="fas fa-chevron-down text-sm">
              </i>
            </div>
            <span class="text-xs">
              https://alpaca.com/
            </span>
            </div>
            <nav>
            <ul>
              <li class="mb-4">
              <a class="flex items-center text-sm font-semibold text-blue-600" href="#">
                <i class="fas fa-tachometer-alt mr-3">
                </i>
                Dashboard
              </a>
              </li>
              <li class="mb-4">
              <a class="flex items-center text-sm text-gray-600" href="#">
                <i class="fas fa-calendar-alt mr-3">
                </i>
                Schedule
              </a>
              </li>
              <li class="mb-4">
              <a class="flex items-center text-sm text-gray-600" href="#">
                <i class="fas fa-wallet mr-3">
                </i>
                Finance
              </a>
              </li>
              <li class="mb-4">
              <a class="flex items-center text-sm text-gray-600" href="#">
                <i class="fas fa-envelope mr-3">
                </i>
                Messages
                <span class="ml-auto bg-blue-600 text-white text-xs rounded-full px-2 py-1">
                5
                </span>
              </a>
              </li>
              <li class="mb-4">
              <a class="flex items-center text-sm text-gray-600" href="#">
                <i class="fas fa-briefcase mr-3">
                </i>
                Portfolio
              </a>
              </li>
              <li class="mb-4">
              <a class="flex items-center text-sm text-gray-600" href="#">
                <i class="fas fa-sign-out-alt mr-3">
                </i>
                Logout
              </a>
              </li>
            </ul>
            </nav>
            <button class="bg-blue-600 text-white text-sm py-3 px-6 rounded-lg w-full mt-6">
            Contact us
            </button>
          </div>
          <!-- Main Content -->
          <div class="col-span-9 px-6 py-8">
            <div class="flex justify-between items-center mb-10">
            <h1 class="text-2xl font-semibold">
              Here is your task analytics for today
            </h1>
            <div class="flex items-center">
              <div class="relative mr-4">
              <input class="rounded-full pl-10 pr-4 py-2 border border-gray-300" placeholder="Search tasks" type="text"/>
              <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">
              </i>
              </div>
              <button class="text-blue-600">
              <i class="fas fa-cog">
              </i>
              </button>
              <button class="ml-4">
              <img alt="User profile" class="rounded-full" height="40" src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-pHFGMiraZCJOYx1x9LILtaII/user-nCj2M1A2CgrbRmk5klxQUFNx/img-rFUJxM5qCkAQLdfx4lmrJS5e.png?st=2023-11-21T01%3A36%3A45Z&amp;se=2023-11-21T03%3A36%3A45Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-11-20T20%3A36%3A41Z&amp;ske=2023-11-21T20%3A36%3A41Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=IXTYlN9DjaykFEMxMV18ab0evw94gnx4mvi%2BXbKSB%2Bo%3D" width="40"/>
              </button>
            </div>
            </div>
            <div class="grid grid-cols-3 gap-6">
            <!-- User Cards -->
            <div class="bg-white rounded-lg p-6 shadow">
              <div class="flex items-center mb-4">
              <img alt="User avatar" class="rounded-full mr-4" height="50" src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-pHFGMiraZCJOYx1x9LILtaII/user-nCj2M1A2CgrbRmk5klxQUFNx/img-0owVXM61rsiHJ1RHnVfLLv7P.png?st=2023-11-21T01%3A36%3A47Z&amp;se=2023-11-21T03%3A36%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-11-20T11%3A26%3A58Z&amp;ske=2023-11-21T11%3A26%3A58Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=yk9bpy3pgkVsl0Y6A09S8YafvoIw0KQc/qKqh6aGUPI%3D" width="50"/>
              <div>
                <h3 class="text-sm font-semibold">
                Anita Maryam
                </h3>
                <p class="text-xs text-gray-500">
                Robinhood.co
                </p>
              </div>
              </div>
              <p class="text-xs">
              4 from 6 task completed
              </p>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
              <div class="flex items-center mb-4">
              <img alt="User avatar" class="rounded-full mr-4" height="50" src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-pHFGMiraZCJOYx1x9LILtaII/user-nCj2M1A2CgrbRmk5klxQUFNx/img-0owVXM61rsiHJ1RHnVfLLv7P.png?st=2023-11-21T01%3A36%3A47Z&amp;se=2023-11-21T03%3A36%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-11-20T11%3A26%3A58Z&amp;ske=2023-11-21T11%3A26%3A58Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=yk9bpy3pgkVsl0Y6A09S8YafvoIw0KQc/qKqh6aGUPI%3D" width="50"/>
              <div>
                <h3 class="text-sm font-semibold">
                Steve Henderson
                </h3>
                <p class="text-xs text-gray-500">
                simpans.studio
                </p>
              </div>
              </div>
              <p class="text-xs">
              2 from 6 task completed
              </p>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
              <div class="flex items-center mb-4">
              <img alt="User avatar" class="rounded-full mr-4" height="50" src="https://oaidalleapiprodscus.blob.core.windows.net/private/org-pHFGMiraZCJOYx1x9LILtaII/user-nCj2M1A2CgrbRmk5klxQUFNx/img-0owVXM61rsiHJ1RHnVfLLv7P.png?st=2023-11-21T01%3A36%3A47Z&amp;se=2023-11-21T03%3A36%3A47Z&amp;sp=r&amp;sv=2021-08-06&amp;sr=b&amp;rscd=inline&amp;rsct=image/png&amp;skoid=6aaadede-4fb3-4698-a8f6-684d7786b067&amp;sktid=a48cca56-e6da-484e-a814-9c849652bcb3&amp;skt=2023-11-20T11%3A26%3A58Z&amp;ske=2023-11-21T11%3A26%3A58Z&amp;sks=b&amp;skv=2021-08-06&amp;sig=yk9bpy3pgkVsl0Y6A09S8YafvoIw0KQc/qKqh6aGUPI%3D" width="50"/>
              <div>
                <h3 class="text-sm font-semibold">
                Spencer Russel
                </h3>
                <p class="text-xs text-gray-500">
                newage.com
                </p>
              </div>
              </div>
              <p class="text-xs">
              4 from 10 task completed
              </p>
            </div>
            <!-- Charts -->
            <div class="col-span-2 bg-white rounded-lg p-6 shadow">
              <h3 class="text-sm font-semibold mb-4">
              Profit summary
              </h3>
              <!-- Chart placeholder -->
              <div class="h-40 bg-gray-100 rounded-lg flex items-center justify-center">
              <span class="text-xs">
                Chart placeholder
              </span>
              </div>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
              <h3 class="text-sm font-semibold mb-4">
              Quick Recap
              </h3>
              <div class="flex items-center justify-between mb-2">
              <div class="flex items-center">
                <i class="fas fa-sync-alt text-blue-600 mr-2">
                </i>
                <span class="text-xs">
                45% growth
                </span>
              </div>
              <span class="text-xs font-semibold text-blue-600">
                Optimize
              </span>
              </div>
              <div class="flex items-center justify-between">
              <div class="flex items-center">
                <i class="fas fa-shield-alt text-blue-600 mr-2">
                </i>
                <span class="text-xs">
                75% your credibility
                </span>
              </div>
              </div>
            </div>
            <!-- More Charts -->
            <div class="col-span-2 bg-white rounded-lg p-6 shadow">
              <h3 class="text-sm font-semibold mb-4">
              Financial health
              </h3>
              <!-- Chart placeholder -->
              <div class="h-40 bg-gray-100 rounded-lg flex items-center justify-center">
              <span class="text-xs">
                Chart placeholder
              </span>
              </div>
            </div>
            <div class="bg-white rounded-lg p-6 shadow">
              <h3 class="text-sm font-semibold mb-4">
              Time spent
              </h3>
              <!-- Chart placeholder -->
              <div class="h-40 bg-gray-100 rounded-lg flex items-center justify-center">
              <span class="text-xs">
                Chart placeholder
              </span>
              </div>
            </div>
            <!-- Schedule -->
            <div class="col-span-3 bg-white rounded-lg p-6 shadow">
              <h3 class="text-sm font-semibold mb-4">
              Daily schedule
              </h3>
              <!-- Chart placeholder -->
              <div class="h-40 bg-gray-100 rounded-lg flex items-center justify-center">
              <span class="text-xs">
                Chart placeholder
              </span>
              </div>
            </div>
            </div>
          </div>
          </div>
        </div>
      </div>
    </div>
    <div :class="home.glow" class="w-96 h-96 rounded-lg mb-12"></div>
    <vue3-status-indicator bg-color="#f81" />
    <vue3-status-indicator bg-color="#a8a" :pause="true" class="ml-4" />
    <span :class="home.title">我是一个标题, 使用v-bind.  平均值: {{ averageNum }}</span>
    <p class="my-4">
      <button class="bg-green-500 hover:bg-green-600 px-6 py-3 text-white border-none" @click="pushNum">push</button>
    </p>
    <p class="mt-4">
      <input :class="home.input" type="text" v-my-directive="averageNum" placeholder="测试自定义指令"/>
    </p>
    <div class="mt-4">
      <el-button type="primary" @click="getLogin">点击登录</el-button>
      <el-button type="text">TEXT BUTTON</el-button>
    </div>
    <article class="mt-4 article" v-highlight v-html="markdownhtml"></article>
    <comp v-colorizer="'green'"></comp>
    <canvas-example></canvas-example>
    <PrettyTimeline :timeline-data="timelineArr" />
  </div>
</template>

<script lang="ts" setup>
  import { Vue3StatusIndicator } from 'vue3-status-indicator'
  import { reactive, computed, toRefs, ref, isRef } from 'vue';
  import http from '@/http/request';
  import { html } from '@/markdown/test.md';
  import hljs from "highlight.js"; // 添加转换高亮标签插件
  import CanvasExample from '@c/CanvasExample.vue'
  // import "vue-hljs/dist/style.css"; // 添加hljs默认样式
  // 引入转换color颜色库, github地址: https://github.com/bgrins/TinyColor
  import tinycolor from 'tinycolor2';
  import { PrettyTimeline } from 'pretty-timeline'
  import 'pretty-timeline/dist/style.css'
  console.log('转换的color: ', tinycolor("#326cd6").lighten(40).toHexString());

  const timelineArr = ref<any[]>([
  {
    isCollapsed: false,
    year: '2022年',
    title: '光阴长河',
    list: [
      {
        date: '12月3日',
        iconColor: 'green',
        iconRight: '7%',
        iconTop: '0%',
        chipColor: '#26C1C9',
        chipText: 'gxr chips',
        subTitleColor: '#ec6a13',
        subTitle: '新的一年开始了',
        imgUrl: '',
        content: `
        春日忆李白<br/>
        白也诗无敌，飘然思不群。<br/>
        清新庾开府，俊逸鲍参军。<br/>
        渭北春天树，江东日暮云。<br/>
        何时一尊酒，重与细论文。
        <br/>
        <a text="orange" border-b="1 dashed orange" href="https://github.com/guxuerui" target="_blank">我的Github</a>
        `,
      },
      {
        date: '12月2日',
        iconColor: '#fa1',
        iconRight: '7%',
        iconTop: '0%',
        chipColor: '#26C',
        chipText: '此时此刻, 恰如彼时彼刻',
        subTitleColor: '#ec6a13',
        subTitle: '进入12月了',
        imgUrl: '',
        content: `
        菊<br/>

        罗隐〔唐代〕<br/>

        篱落岁云暮，数枝聊自芳。<br/>
        雪裁纤蕊密，金拆小苞香。<br/>
        千载白衣酒，一生青女霜。<br/>
        春丛莫轻薄，彼此有行藏。
        <br/>
        <a text="blue" border-b="1 dashed blue" href="https://github.com/guxuerui" target="_blank">我的Github</a>
        `,
      },
    ],
  },
  {
    isCollapsed: false,
    year: '2021年',
    title: '',
    list: [
      {
        date: '12月2日',
        iconColor: 'cyan',
        iconRight: '7%',
        iconTop: '0%',
        chipColor: '#1C9',
        chipText: '你好吗',
        subTitleColor: '#1f3',
        subTitle: '去年今日',
        imgUrl: '',
        content: `
        秦淮杂诗·其八<br/>

        王士祯〔清代〕<br/>

        新歌细字写冰纨，小部君王带笑看。<br/>
        千载秦淮呜咽水，不应仍恨孔都官。
        `,
      },
    ],
  },
])

  // 需要从 import.meta中获取环境变量, 比如 import.meta.env.VITE_TOKEN
  // 自定义指令
  const vMyDirective = {
    mounted: (el: { focus: () => void; }, binding: { value: number; }) => {
      console.log('binding: ', binding.value);
      el.focus();
    }
  }
  // 在vue3内，通过自定义指令来锁定高亮渲染标签的范围
  const vHighlight = {
    mounted(el: any) {
      const blocks = el.querySelectorAll('pre code'); // 匹配pre标签，code标签
      blocks.forEach((block: any) => {
        hljs.highlightBlock(block);
      });
    }
  };
  const markdownhtml = ref(html)
  console.log('是ref吗: ', isRef(markdownhtml))

  // 求平均值 function average
  function average (arr: number[]) {
    return arr.reduce((a, b) => a + b, 0) / arr.length;
  }
  console.log('是ref吗: ', isRef(average))

  // 定义响应式对象
  // 状态驱动的动态 CSS
  interface Theme {
    color?: string,
    numbers: number[],
    averageNum: number
  }
  const theme: Theme = reactive({
    color: '#e43282',
    numbers: [1, 2, 3, 4, 5],
    averageNum: computed(() => {
      return average(theme.numbers);
    })
  });

  // 更新numbers数组
  const pushNum = () => {
    theme.numbers.push(theme.numbers.length + 1);
  }
  // 模拟登录接口
  const getLogin = () => {
    http.post('/login').then((res: any) => {
      console.log(res);
    });
  }

  const { averageNum } = toRefs(theme);

  // const mstr = ref(`# Marked in **Node.js**`);
  // const markdownHtml = computed(() => {
    // return marked.parse(mstr.value);
  // })
</script>

<style lang="scss" module="home">
  .input {
    border: 1px solid #000;
    border-radius: 5px;
    padding: 5px 10px;
  }
  .title {
    /* 状态驱动的 动态CSS */
    color: v-bind('theme.color');
  }
  .glow {
    background-color: #0C1E7F;
    box-shadow: 0 0 8px #0B5FFF, 0 0 12px #0B5FFF, 0 0 16px #0B5FFF, 0 0 24px #0B5FFF, 0 0 32px #0B5FFF;
    border: 1px solid #0B5FFF;
  }
</style>

